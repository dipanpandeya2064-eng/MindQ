<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> MINDQ (माइन्डक्यू)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --success: #4cc9f0;
            --warning: #ff9e00;
            --danger: #ef233c;
            --border-radius: 12px;
            --box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background-color: #f5f7ff;
            min-height: 100vh;
            padding-bottom: 40px;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 0;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            box-shadow: var(--box-shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: var(--accent);
        }
        
        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .logo .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .language-toggle {
            display: flex;
            gap: 10px;
        }
        
        .lang-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .lang-btn:hover, .lang-btn.active {
            background: white;
            color: var(--primary);
        }
        
        /* Home/Back Button */
        .home-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
        }
        
        .home-btn:hover {
            background: white;
            color: var(--primary);
            transform: translateY(-2px);
        }
        
        .home-btn.hidden {
            display: none;
        }
        
        /* Timer */
        .timer-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 15px 25px;
            box-shadow: var(--box-shadow);
            margin-top: 20px;
            display: none;
            justify-content: space-between;
            align-items: center;
        }
        
        .timer-container.active {
            display: flex;
        }
        
        .timer {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .timer.warning {
            color: var(--warning);
        }
        
        .timer.danger {
            color: var(--danger);
        }
        
        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            flex-grow: 1;
            margin: 0 20px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            width: 0%;
            transition: width 0.5s ease;
        }
        
        /* Main Content */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-top: 30px;
        }
        
        /* Sections */
        .section {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }
        
        .section:hover {
            transform: translateY(-5px);
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            color: var(--secondary);
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        .section-title i {
            font-size: 1.5rem;
        }
        
        /* Test Selector */
        .test-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .test-card {
            background: linear-gradient(135deg, #f8f9ff, #eef1ff);
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }
        
        .test-card:hover {
            border-color: var(--primary);
            transform: scale(1.03);
        }
        
        .test-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .test-card h3 {
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .test-info {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        /* Question Section */
        .question-container {
            display: none;
        }
        
        .question-container.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .question-counter {
            background: var(--primary);
            color: white;
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
        }
        
        .question-text {
            font-size: 1.2rem;
            margin-bottom: 25px;
            line-height: 1.8;
        }
        
        .question-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 15px 0;
            display: block;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .options-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .option {
            background: #f8f9ff;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .option:hover {
            background: #eef1ff;
            border-color: var(--primary);
        }
        
        .option.selected {
            background: #e3f2fd;
            border-color: var(--primary);
        }
        
        .option.correct {
            background: #d4edda;
            border-color: #28a745;
        }
        
        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }
        
        .option-letter {
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .option.correct .option-letter {
            background: #28a745;
        }
        
        .option.incorrect .option-letter {
            background: #dc3545;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn:hover {
            background: var(--secondary);
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0,0,0,0.1);
        }
        
        .btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .btn-accent {
            background: var(--accent);
        }
        
        .btn-accent:hover {
            background: #e11571;
        }
        
        .btn-warning {
            background: var(--warning);
        }
        
        .btn-warning:hover {
            background: #e68900;
        }
        
        /* Results Section */
        .results-container {
            text-align: center;
            display: none;
        }
        
        .results-container.active {
            display: block;
            animation: fadeIn 0.8s ease;
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .results-title {
            font-size: 1.8rem;
            color: var(--secondary);
        }
        
        .results-score {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .result-card {
            background: #f8f9ff;
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            transition: var(--transition);
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .result-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .result-card.correct i {
            color: #28a745;
        }
        
        .result-card.time i {
            color: var(--primary);
        }
        
        .result-card.accuracy i {
            color: var(--accent);
        }
        
        .result-card.score i {
            color: var(--warning);
        }
        
        .result-value {
            font-size: 3rem;
            font-weight: 700;
            margin: 10px 0;
        }
        
        .result-label {
            font-size: 1.2rem;
            color: var(--gray);
        }
        
        .iq-score {
            font-size: 4rem;
            font-weight: 700;
            color: var(--primary);
            margin: 20px 0;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.1);
        }
        
        .iq-category {
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 30px;
        }
        
        .progress-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(var(--primary) 0% 75%, #e0e0e0 75% 100%);
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .progress-circle::before {
            content: '';
            position: absolute;
            width: 90px;
            height: 90px;
            background: white;
            border-radius: 50%;
        }
        
        .progress-text {
            position: relative;
            z-index: 1;
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--dark);
        }
        
        .detailed-results {
            margin-top: 30px;
            text-align: left;
        }
        
        .result-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .breakdown-card {
            padding: 20px;
            background: #f8f9ff;
            border-radius: var(--border-radius);
        }
        
        .breakdown-card h4 {
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        /* Footer */
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .header-right {
                width: 100%;
                justify-content: space-between;
            }
            
            .logo h1 {
                font-size: 1.5rem;
            }
            
            .section {
                padding: 20px;
            }
            
            .question-text {
                font-size: 1.1rem;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .iq-score {
                font-size: 3rem;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                justify-content: center;
                width: 100%;
            }
            
            .timer-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .progress-bar {
                width: 100%;
                margin: 10px 0;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .home-btn {
                padding: 8px 15px;
                font-size: 0.85rem;
            }
        }
        
        @media (max-width: 480px) {
            .test-selector {
                grid-template-columns: 1fr;
            }
            
            .logo h1 {
                font-size: 1.3rem;
            }
            
            .timer {
                font-size: 1.5rem;
            }
            
            .header-right {
                flex-direction: column;
                gap: 10px;
            }
        }
        
        /* Language Specific */
        .lang-np {
            display: none;
        }
        
        .lang-en {
            display: block;
        }
        
        .language-np .lang-np {
            display: block;
        }
        
        .language-np .lang-en {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-brain"></i>
                <div>
                    <h1 class="lang-en"> MINDQ </h1>
                    <h1 class="lang-np"> माइन्डक्यू </h1>
                    <div class="subtitle lang-en">Comprehensive Cognitive Assessment</div>
                    <div class="subtitle lang-np">व्यापक संज्ञानात्मक मूल्याङ्कन</div>
                </div>
            </div>
            <div class="header-right">
                <div class="language-toggle">
                    <button class="lang-btn active" id="en-btn">
                        <i class="fas fa-globe-americas"></i> English
                    </button>
                    <button class="lang-btn" id="np-btn">
                        <i class="fas fa-globe-asia"></i> नेपाली
                    </button>
                </div>
                <!-- Home/Back Button -->
                <button class="home-btn hidden" id="home-btn">
                    <i class="fas fa-home"></i>
                    <span class="lang-en">Home</span>
                    <span class="lang-np">गृहपृष्ठ</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Timer -->
    <div class="container timer-container" id="timer-container">
        <div>
            <span class="lang-en">Time Remaining:</span>
            <span class="lang-np">बाँकी समय:</span>
            <div class="timer" id="timer">30:00</div>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div>
            <span class="lang-en">Questions:</span>
            <span class="lang-np">प्रश्नहरू:</span>
            <span id="current-timer-question">1</span>/<span id="total-timer-questions">30</span>
        </div>
    </div>

    <div class="container main-content">
        <!-- Test Selection -->
        <div class="section" id="test-selection">
            <div class="section-title">
                <i class="fas fa-tasks"></i>
                <h2 class="lang-en">Choose Your Test Type</h2>
                <h2 class="lang-np">तपाईंको परीक्षण प्रकार छान्नुहोस्</h2>
            </div>
            <div class="test-selector">
                <div class="test-card" id="mcq-test">
                    <i class="fas fa-clipboard-list"></i>
                    <h3 class="lang-en">MCQ Intelligence Test</h3>
                    <h3 class="lang-np">बहुविकल्पीय बुद्धि परीक्षण</h3>
                    <p class="lang-en">General knowledge and analytical questions</p>
                    <p class="lang-np">सामान्य ज्ञान र विश्लेषणात्मक प्रश्नहरू</p>
                    <div class="test-info">
                        <span class="lang-en">15 questions</span>
                        <span class="lang-np">१५ प्रश्नहरू</span>
                        <span class="lang-en">15 minutes</span>
                        <span class="lang-np">१५ मिनेट</span>
                    </div>
                </div>
                <div class="test-card" id="logical-test">
                    <i class="fas fa-project-diagram"></i>
                    <h3 class="lang-en">Logical Reasoning Test</h3>
                    <h3 class="lang-np">तार्किक तर्क परीक्षण</h3>
                    <p class="lang-en">Pattern recognition and logical sequences</p>
                    <p class="lang-np">ढाँचा पहिचान र तार्किक क्रमहरू</p>
                    <div class="test-info">
                        <span class="lang-en">15 questions</span>
                        <span class="lang-np">१५ प्रश्नहरू</span>
                        <span class="lang-en">20 minutes</span>
                        <span class="lang-np">२० मिनेट</span>
                    </div>
                </div>
                <div class="test-card" id="iq-test">
                    <i class="fas fa-chart-line"></i>
                    <h3 class="lang-en">Comprehensive IQ Test</h3>
                    <h3 class="lang-np">व्यापक आईक्यू परीक्षण</h3>
                    <p class="lang-en">Full IQ assessment with all question types</p>
                    <p class="lang-np">सबै प्रकारका प्रश्नहरूसहित पूर्ण आईक्यू मूल्याङ्कन</p>
                    <div class="test-info">
                        <span class="lang-en">20 questions</span>
                        <span class="lang-np">२० प्रश्नहरू</span>
                        <span class="lang-en">25 minutes</span>
                        <span class="lang-np">२५ मिनेट</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question Container -->
        <div class="section question-container" id="question-section">
            <div class="question-header">
                <div>
                    <h3 class="lang-en" id="current-test-type">MCQ Intelligence Test</h3>
                    <h3 class="lang-np" id="current-test-type-np">बहुविकल्पीय बुद्धि परीक्षण</h3>
                </div>
                <div class="question-counter">
                    <span id="current-question">1</span>/<span id="total-questions">15</span>
                </div>
            </div>
            
            <div id="question-content">
                <!-- Question will be inserted here by JavaScript -->
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="prev-btn">
                    <i class="fas fa-arrow-left"></i>
                    <span class="lang-en">Previous</span>
                    <span class="lang-np">अघिल्लो</span>
                </button>
                <button class="btn" id="next-btn">
                    <span class="lang-en">Next</span>
                    <span class="lang-np">अर्को</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
                <button class="btn btn-accent" id="submit-btn">
                    <i class="fas fa-paper-plane"></i>
                    <span class="lang-en">Submit Test</span>
                    <span class="lang-np">परीक्षण पेश गर्नुहोस्</span>
                </button>
            </div>
        </div>

        <!-- Results Container -->
        <div class="section results-container" id="results-section">
            <div class="results-header">
                <div>
                    <h2 class="results-title lang-en">Your IQ Test Results</h2>
                    <h2 class="results-title lang-np">तपाईंको आईक्यू परीक्षण नतिजा</h2>
                </div>
                <div class="results-score">
                    <span id="results-score">0</span>
                </div>
            </div>
            
            <div class="iq-score" id="iq-score">125</div>
            <div class="iq-category lang-en" id="iq-category">Superior Intelligence</div>
            <div class="iq-category lang-np" id="iq-category-np">उत्कृष्ट बुद्धि</div>
            
            <div class="results-grid">
                <div class="result-card correct">
                    <i class="fas fa-check-circle"></i>
                    <div class="result-value" id="correct-answers">0</div>
                    <div class="result-label lang-en">Correct Answers</div>
                    <div class="result-label lang-np">सही उत्तरहरू</div>
                </div>
                
                <div class="result-card time">
                    <i class="fas fa-clock"></i>
                    <div class="result-value" id="time-taken">0:00</div>
                    <div class="result-label lang-en">Time Taken</div>
                    <div class="result-label lang-np">लिएको समय</div>
                </div>
                
                <div class="result-card accuracy">
                    <i class="fas fa-bullseye"></i>
                    <div class="result-value" id="accuracy-rate">0%</div>
                    <div class="result-label lang-en">Accuracy Rate</div>
                    <div class="result-label lang-np">शुद्धता दर</div>
                </div>
                
                <div class="result-card score">
                    <i class="fas fa-star"></i>
                    <div class="result-value" id="performance-score">0</div>
                    <div class="result-label lang-en">Performance Score</div>
                    <div class="result-label lang-np">प्रदर्शन स्कोर</div>
                </div>
            </div>
            
            <div class="detailed-results">
                <h3 class="lang-en">Detailed Breakdown</h3>
                <h3 class="lang-np">विस्तृत विश्लेषण</h3>
                
                <div class="result-breakdown">
                    <div class="breakdown-card">
                        <h4 class="lang-en">Question Types</h4>
                        <h4 class="lang-np">प्रश्न प्रकारहरू</h4>
                        <p class="lang-en" id="question-types">Mathematical: 10, Logical: 10, Analytical: 10</p>
                        <p class="lang-np" id="question-types-np">गणितीय: १०, तार्किक: १०, विश्लेषणात्मक: १०</p>
                    </div>
                    
                    <div class="breakdown-card">
                        <h4 class="lang-en">Time Analysis</h4>
                        <h4 class="lang-np">समय विश्लेषण</h4>
                        <p class="lang-en" id="time-analysis">Average time per question: 45 seconds</p>
                        <p class="lang-np" id="time-analysis-np">प्रति प्रश्न औसत समय: ४५ सेकेन्ड</p>
                    </div>
                    
                    <div class="breakdown-card">
                        <h4 class="lang-en">Recommendations</h4>
                        <h4 class="lang-np">सिफारिसहरू</h4>
                        <p class="lang-en" id="recommendations">Practice more logical reasoning questions</p>
                        <p class="lang-np" id="recommendations-np">थप तार्किक तर्क प्रश्नहरूको अभ्यास गर्नुहोस्</p>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons" style="margin-top: 30px;">
                <button class="btn btn-secondary" id="review-btn">
                    <i class="fas fa-eye"></i>
                    <span class="lang-en">Review Answers</span>
                    <span class="lang-np">उत्तरहरू पुनरावलोकन गर्नुहोस्</span>
                </button>
                <button class="btn btn-accent" id="restart-btn">
                    <i class="fas fa-redo"></i>
                    <span class="lang-en">Take Another Test</span>
                    <span class="lang-np">अर्को परीक्षण लिनुहोस्</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="container">
    <p class="lang-en">   MINDQ   . This test is for educational purposes only.</p>
    <p class="lang-np">   माइन्डक्यू ।  यो परीक्षण केवल शैक्षिक उद्देश्यका लागि हो।</p>
    <p> Developed by : Dipan Pandeya -2026- </p>
    <p> This is a prototype of MINDQ , any helpful suggestions are welcomed ! Email : mindqweb@gmail.com</p>
    </footer>

    <script>
        // Language switching functionality
        const enBtn = document.getElementById('en-btn');
        const npBtn = document.getElementById('np-btn');
        const body = document.body;
        const homeBtn = document.getElementById('home-btn');
        
        enBtn.addEventListener('click', () => {
            enBtn.classList.add('active');
            npBtn.classList.remove('active');
            body.classList.remove('language-np');
        });
        
        npBtn.addEventListener('click', () => {
            npBtn.classList.add('active');
            enBtn.classList.remove('active');
            body.classList.add('language-np');
        });

        // Home button functionality
        homeBtn.addEventListener('click', goToHomePage);
        
        function goToHomePage() {
            // Stop timer if running
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Hide all sections
            questionSection.classList.remove('active');
            resultsSection.classList.remove('active');
            timerContainer.classList.remove('active');
            
            // Show test selection
            testSelection.style.display = 'block';
            
            // Hide home button
            homeBtn.classList.add('hidden');
            
            // Reset test state
            currentTest = null;
            currentQuestionIndex = 0;
            userAnswers = {};
            testType = "";
            timeRemaining = 0;
        }

        // Questions database for Grade 12 level
        const questions = {
            mcq: [
                {
                    id: 1,
                    text_en: "What number should come next in the series: 2, 6, 12, 20, 30, ?",
                    text_np: "श्रृंखला: २, ६, १२, २०, ३०, ? मा अर्को कुन नम्बर आउनुपर्छ?",
                    options_en: ["38", "42", "44", "40"],
                    options_np: ["३८", "४२", "४४", "४०"],
                    correct: 1,
                    type: "mathematical",
                    explanation_en: "The pattern is: +4, +6, +8, +10, so next is +12 = 42"
                },
                {
                    id: 2,
                    text_en: "Which word does NOT belong with the others?",
                    text_np: "कुन शब्द अरूसँग मेल खाँदैन?",
                    options_en: ["Circle", "Square", "Triangle", "Rectangle"],
                    options_np: ["वृत्त", "वर्ग", "त्रिभुज", "आयत"],
                    correct: 0,
                    type: "analytical",
                    explanation_en: "Circle is the only shape without straight edges"
                },
                {
                    id: 3,
                    text_en: "If x + 5 = 12, what is the value of x?",
                    text_np: "यदि x + 5 = 12 भए, x को मान के हो?",
                    options_en: ["5", "7", "12", "17"],
                    options_np: ["५", "७", "१२", "१७"],
                    correct: 1,
                    type: "mathematical",
                    explanation_en: "x = 12 - 5 = 7"
                },
                {
                    id: 4,
                    text_en: "Which country is known as the 'Land of the Rising Sun'?",
                    text_np: "कुन देश 'उदाउने सूर्यको भूमि' को रूपमा चिनिन्छ?",
                    options_en: ["China", "Thailand", "Japan", "South Korea"],
                    options_np: ["चीन", "थाइल्यान्ड", "जापान", "दक्षिण कोरिया"],
                    correct: 2,
                    type: "general",
                    explanation_en: "Japan is known as the Land of the Rising Sun"
                },
                {
                    id: 5,
                    text_en: "What is 15% of 200?",
                    text_np: "२०० को १५% के हो?",
                    options_en: ["15", "20", "30", "25"],
                    options_np: ["१५", "२०", "३०", "२५"],
                    correct: 2,
                    type: "mathematical",
                    explanation_en: "15% of 200 = 0.15 × 200 = 30"
                },
                {
                    id: 6,
                    text_en: "Rearrange the letters 'R A I N' to form a meaningful word",
                    text_np: "'R A I N' अक्षरहरूलाई पुन: व्यवस्थित गर्नुहोस् एउटा अर्थपूर्ण शब्द बनाउन",
                    options_en: ["RAIN", "RANI", "IRAN", "ARIN"],
                    options_np: ["RAIN", "RANI", "IRAN", "ARIN"],
                    correct: 0,
                    type: "verbal",
                    explanation_en: "RAIN is the correct meaningful word"
                },
                {
                    id: 7,
                    text_en: "If some doctors are scientists and all scientists are researchers, then:",
                    text_np: "यदि केही डाक्टरहरू वैज्ञानिक हुन् र सबै वैज्ञानिकहरू शोधकर्ता हुन्, भने:",
                    options_en: ["All doctors are researchers", "Some doctors are researchers", "No doctors are researchers", "All researchers are doctors"],
                    options_np: ["सबै डाक्टरहरू शोधकर्ता हुन्", "केही डाक्टरहरू शोधकर्ता हुन्", "कुनै पनि डाक्टर शोधकर्ता होइनन्", "सबै शोधकर्ताहरू डाक्टर हुन्"],
                    correct: 1,
                    type: "logical",
                    explanation_en: "Some doctors who are scientists must be researchers"
                },
                {
                    id: 8,
                    text_en: "Complete the analogy: Ocean is to Water as Desert is to _____",
                    text_np: "समानता पूरा गर्नुहोस्: महासागर पानीसँग हो जस्तै मरुभूमि _____ सँग हो",
                    options_en: ["Sand", "Heat", "Cactus", "Oasis"],
                    options_np: ["बालुवा", "तातो", "क्याक्टस", "मरुभूमिमा पानीको स्रोत"],
                    correct: 0,
                    type: "verbal",
                    explanation_en: "Ocean contains water, desert contains sand"
                },
                {
                    id: 9,
                    text_en: "If today is Friday, what day will it be 7 days from now?",
                    text_np: "यदि आज शुक्रबार हो भने, ७ दिन पछि कुन दिन हुनेछ?",
                    options_en: ["Friday", "Saturday", "Sunday", "Monday"],
                    options_np: ["शुक्रबार", "शनिबार", "आइतबार", "सोमबार"],
                    correct: 0,
                    type: "mathematical",
                    explanation_en: "7 days = 1 week, so same day"
                },
                {
                    id: 10,
                    text_en: "Which number is different from others?",
                    text_np: "कुन नम्बर अरू भन्दा फरक छ?",
                    options_en: ["9", "16", "25", "36", "50"],
                    options_np: ["९", "१६", "२५", "३६", "५०"],
                    correct: 4,
                    type: "mathematical",
                    explanation_en: "All others are perfect squares (3², 4², 5², 6²)"
                },
                {
                    id: 11,
                    text_en: "A farmer has 17 sheep. All but 9 die. How many are left?",
                    text_np: "एक किसानसँग १७ भेडा छन्। ९ बाहेक सबै मर्छन्। कति बाँकी छन्?",
                    options_en: ["8", "9", "17", "0"],
                    options_np: ["८", "९", "१७", "०"],
                    correct: 1,
                    type: "logical",
                    explanation_en: "'All but 9 die' means 9 are left alive"
                },
                {
                    id: 12,
                    text_en: "What is the capital of Nepal?",
                    text_np: "नेपालको राजधानी के हो?",
                    options_en: ["Pokhara", "Biratnagar", "Kathmandu", "Bhaktapur"],
                    options_np: ["पोखरा", "विराटनगर", "काठमाडौँ", "भक्तपुर"],
                    correct: 2,
                    type: "general",
                    explanation_en: "Kathmandu is the capital of Nepal"
                },
                {
                    id: 13,
                    text_en: "What is the square root of 144?",
                    text_np: "१४४ को वर्गमूल के हो?",
                    options_en: ["11", "12", "13", "14"],
                    options_np: ["११", "१२", "१३", "१४"],
                    correct: 1,
                    type: "mathematical",
                    explanation_en: "12 × 12 = 144"
                },
                {
                    id: 14,
                    text_en: "Which planet is known as the Red Planet?",
                    text_np: "कुन ग्रह रातो ग्रहको रूपमा चिनिन्छ?",
                    options_en: ["Venus", "Mars", "Jupiter", "Saturn"],
                    options_np: ["शुक्र", "मङ्गल", "बृहस्पति", "शनि"],
                    correct: 1,
                    type: "general",
                    explanation_en: "Mars is known as the Red Planet"
                },
                {
                    id: 15,
                    text_en: "What is 3/4 of 100?",
                    text_np: "१०० को ३/४ के हो?",
                    options_en: ["25", "50", "75", "100"],
                    options_np: ["२५", "५०", "७५", "१००"],
                    correct: 2,
                    type: "mathematical",
                    explanation_en: "3/4 × 100 = 75"
                }
            ],
            logical: [
                {
                    id: 16,
                    text_en: "Which shape is different from others?",
                    text_np: "कुन आकार अरू भन्दा फरक छ?",
                    options_en: ["Cube", "Sphere", "Pyramid", "Cylinder"],
                    options_np: ["घन", "गोला", "पिरामिड", "बेलन"],
                    correct: 1,
                    type: "spatial",
                    explanation_en: "Sphere has no edges or vertices"
                },
                {
                    id: 17,
                    text_en: "Complete the pattern: A, C, E, G, ?",
                    text_np: "ढाँचा पूरा गर्नुहोस्: A, C, E, G, ?",
                    options_en: ["H", "I", "J", "K"],
                    options_np: ["H", "I", "J", "K"],
                    correct: 1,
                    type: "pattern",
                    explanation_en: "Skipping one letter: A, (B), C, (D), E, (F), G, (H), I"
                },
                {
                    id: 18,
                    text_en: "If all roses are flowers and some flowers fade quickly, then:",
                    text_np: "यदि सबै गुलाबहरू फूलहरू हुन् र केही फूलहरू छिटो म्लान हुन्छन्, भने:",
                    options_en: ["All roses fade quickly", "Some roses fade quickly", "No roses fade quickly", "Cannot be determined"],
                    options_np: ["सबै गुलाबहरू छिटो म्लान हुन्छन्", "केही गुलाबहरू छिटो म्लान हुन्छन्", "कुनै गुलाब छिटो म्लान हुँदैन", "निर्धारण गर्न सकिदैन"],
                    correct: 3,
                    type: "logical",
                    explanation_en: "We don't know if roses are among flowers that fade quickly"
                },
                {
                    id: 19,
                    text_en: "What comes next: △, □, ○, △, □, ?",
                    text_np: "अर्को के आउँछ: △, □, ○, △, □, ?",
                    options_en: ["△", "□", "○", "◇"],
                    options_np: ["△", "□", "○", "◇"],
                    correct: 2,
                    type: "pattern",
                    explanation_en: "Pattern repeats: △, □, ○"
                },
                {
                    id: 20,
                    text_en: "If John is taller than Mary, and Mary is taller than Sam, then:",
                    text_np: "यदि जोन मेरी भन्दा अग्लो छ, र मेरी स्याम भन्दा अग्लो छ, भने:",
                    options_en: ["Sam is tallest", "John is tallest", "Mary is tallest", "Cannot determine"],
                    options_np: ["स्याम सबैभन्दा अग्लो हो", "जोन सबैभन्दा अग्लो हो", "मेरी सबैभन्दा अग्लो हो", "निर्धारण गर्न सकिदैन"],
                    correct: 1,
                    type: "logical",
                    explanation_en: "John > Mary > Sam, so John is tallest"
                },
                {
                    id: 21,
                    text_en: "Which number comes next: 2, 4, 8, 16, ?",
                    text_np: "अर्को नम्बर के हो: २, ४, ८, १६, ?",
                    options_en: ["24", "32", "36", "64"],
                    options_np: ["२४", "३२", "३६", "६४"],
                    correct: 1,
                    type: "pattern",
                    explanation_en: "Multiplying by 2 each time"
                },
                {
                    id: 22,
                    text_en: "If some cats are black and all black animals are nocturnal, then:",
                    text_np: "यदि केही बिरालाहरू काला हुन् र सबै काला जनावरहरू राती सक्रिय हुन्छन्, भने:",
                    options_en: ["All cats are nocturnal", "Some cats are nocturnal", "No cats are nocturnal", "All nocturnal animals are cats"],
                    options_np: ["सबै बिरालाहरू राती सक्रिय हुन्छन्", "केही बिरालाहरू राती सक्रिय हुन्छन्", "कुनै बिराला राती सक्रिय हुँदैन", "सबै राती सक्रिय जनावरहरू बिराला हुन्"],
                    correct: 1,
                    type: "logical",
                    explanation_en: "Some cats (the black ones) are nocturnal"
                },
                {
                    id: 23,
                    text_en: "What is the missing number: 3, 7, 11, 15, ?",
                    text_np: "हराएको नम्बर के हो: ३, ७, ११, १५, ?",
                    options_en: ["17", "19", "21", "23"],
                    options_np: ["१७", "१९", "२१", "२३"],
                    correct: 1,
                    type: "pattern",
                    explanation_en: "Adding 4 each time: 15 + 4 = 19"
                },
                {
                    id: 24,
                    text_en: "Which is the odd one out?",
                    text_np: "कुन बिचमा फरक छ?",
                    options_en: ["Pen", "Pencil", "Book", "Eraser"],
                    options_np: ["कलम", "पेन्सिल", "किताब", "रबर"],
                    correct: 2,
                    type: "analytical",
                    explanation_en: "Book is for reading, others are writing/drawing tools"
                },
                {
                    id: 25,
                    text_en: "If A=1, B=2, C=3, what is D+E?",
                    text_np: "यदि A=1, B=2, C=3 भए, D+E को मान के हो?",
                    options_en: ["7", "8", "9", "10"],
                    options_np: ["७", "८", "९", "१०"],
                    correct: 2,
                    type: "mathematical",
                    explanation_en: "D=4, E=5, so 4+5=9"
                },
                {
                    id: 26,
                    text_en: "Complete: Dog is to puppy as cat is to _____",
                    text_np: "पूरा गर्नुहोस्: कुकुर र पिल्ला जस्तै बिरालो र _____",
                    options_en: ["Kitten", "Cub", "Puppy", "Baby"],
                    options_np: ["बिरालाको बच्चा", "शावक", "पिल्ला", "बच्चा"],
                    correct: 0,
                    type: "verbal",
                    explanation_en: "Young dog = puppy, young cat = kitten"
                },
                {
                    id: 27,
                    text_en: "What comes next: Z, Y, X, W, ?",
                    text_np: "अर्को के आउँछ: Z, Y, X, W, ?",
                    options_en: ["U", "V", "T", "S"],
                    options_np: ["U", "V", "T", "S"],
                    correct: 1,
                    type: "pattern",
                    explanation_en: "Alphabet backwards"
                },
                {
                    id: 28,
                    text_en: "If Monday is the first day, what is the fifth day?",
                    text_np: "यदि सोमबार पहिलो दिन हो भने, पाँचौं दिन कुन हो?",
                    options_en: ["Wednesday", "Thursday", "Friday", "Saturday"],
                    options_np: ["बुधबार", "बिहिबार", "शुक्रबार", "शनिबार"],
                    correct: 2,
                    type: "mathematical",
                    explanation_en: "Mon(1), Tue(2), Wed(3), Thu(4), Fri(5)"
                },
                {
                    id: 29,
                    text_en: "Which pair is different?",
                    text_np: "कुन जोडी फरक छ?",
                    options_en: ["Eye : See", "Ear : Hear", "Nose : Smell", "Mouth : Talk"],
                    options_np: ["आँखा : हेर्नु", "कान : सुन्नु", "नाक : सुङ्नु", "मुख : बोल्नु"],
                    correct: 3,
                    type: "analytical",
                    explanation_en: "Talking is not a direct sensory function"
                },
                {
                    id: 30,
                    text_en: "What is the next number: 1, 4, 9, 16, ?",
                    text_np: "अर्को नम्बर के हो: १, ४, ९, १६, ?",
                    options_en: ["20", "24", "25", "36"],
                    options_np: ["२०", "२४", "२५", "३६"],
                    correct: 2,
                    type: "pattern",
                    explanation_en: "Square numbers: 1², 2², 3², 4², 5²=25"
                }
            ],
            iq: [
                {
                    id: 31,
                    text_en: "Solve: 2x - 6 = 10",
                    text_np: "हल गर्नुहोस्: २x - ६ = १०",
                    options_en: ["x = 2", "x = 4", "x = 6", "x = 8"],
                    options_np: ["x = २", "x = ४", "x = ६", "x = ८"],
                    correct: 3,
                    type: "mathematical",
                    explanation_en: "2x = 16, so x = 8"
                },
                {
                    id: 32,
                    text_en: "What is the area of a square with side 5cm?",
                    text_np: "भुजा ५ से.मि. भएको वर्गको क्षेत्रफल के हो?",
                    options_en: ["10 cm²", "20 cm²", "25 cm²", "30 cm²"],
                    options_np: ["१० से.मि.²", "२० से.मि.²", "२५ से.मि.²", "३० से.मि.²"],
                    correct: 2,
                    type: "mathematical",
                    explanation_en: "Area = side² = 5² = 25 cm²"
                },
                {
                    id: 33,
                    text_en: "If 3 pencils cost Rs. 15, how much do 5 pencils cost?",
                    text_np: "यदि ३ वटा पेन्सिलको मूल्य रु. १५ छ भने, ५ वटा पेन्सिलको मूल्य कति हो?",
                    options_en: ["Rs. 20", "Rs. 25", "Rs. 30", "Rs. 35"],
                    options_np: ["रु. २०", "रु. २५", "रु. ३०", "रु. ३५"],
                    correct: 1,
                    type: "mathematical",
                    explanation_en: "1 pencil = 15/3 = Rs. 5, so 5 pencils = 5×5 = Rs. 25"
                },
                {
                    id: 34,
                    text_en: "Which is the largest fraction?",
                    text_np: "कुन भिन्न सबैभन्दा ठूलो छ?",
                    options_en: ["1/2", "2/3", "3/4", "4/5"],
                    options_np: ["१/२", "२/३", "३/४", "४/५"],
                    correct: 3,
                    type: "mathematical",
                    explanation_en: "4/5 = 0.8 which is largest"
                },
                {
                    id: 35,
                    text_en: "What is 25% of 80?",
                    text_np: "८० को २५% के हो?",
                    options_en: ["15", "20", "25", "30"],
                    options_np: ["१५", "२०", "२५", "३०"],
                    correct: 1,
                    type: "mathematical",
                    explanation_en: "25% of 80 = 0.25 × 80 = 20"
                },
                {
                    id: 36,
                    text_en: "If a triangle has angles 40° and 60°, what is the third angle?",
                    text_np: "यदि एउटा त्रिभुजमा ४०° र ६०° कोणहरू छन् भने, तेस्रो कोण कति हो?",
                    options_en: ["60°", "70°", "80°", "90°"],
                    options_np: ["६०°", "७०°", "८०°", "९०°"],
                    correct: 2,
                    type: "mathematical",
                    explanation_en: "Sum = 180°, so third angle = 180 - (40+60) = 80°"
                },
                {
                    id: 37,
                    text_en: "What is the next letter: B, D, F, H, ?",
                    text_np: "अर्को अक्षर के हो: B, D, F, H, ?",
                    options_en: ["I", "J", "K", "L"],
                    options_np: ["I", "J", "K", "L"],
                    correct: 1,
                    type: "pattern",
                    explanation_en: "Skipping one letter: B, (C), D, (E), F, (G), H, (I), J"
                },
                {
                    id: 38,
                    text_en: "If all squares are rectangles and some rectangles are large, then:",
                    text_np: "यदि सबै वर्गहरू आयत हुन् र केही आयतहरू ठूला हुन्, भने:",
                    options_en: ["All squares are large", "Some squares are large", "No squares are large", "Cannot determine"],
                    options_np: ["सबै वर्गहरू ठूला हुन्", "केही वर्गहरू ठूला हुन्", "कुनै वर्ग ठूलो हुँदैन", "निर्धारण गर्न सकिदैन"],
                    correct: 3,
                    type: "logical",
                    explanation_en: "We don't know if squares are among large rectangles"
                },
                {
                    id: 39,
                    text_en: "What is the missing number: 5, 10, 15, 20, ?",
                    text_np: "हराएको नम्बर के हो: ५, १०, १५, २०, ?",
                    options_en: ["25", "30", "35", "40"],
                    options_np: ["२५", "३०", "३५", "४०"],
                    correct: 0,
                    type: "pattern",
                    explanation_en: "Adding 5 each time"
                },
                {
                    id: 40,
                    text_en: "Which word is different?",
                    text_np: "कुन शब्द फरक छ?",
                    options_en: ["Apple", "Banana", "Carrot", "Orange"],
                    options_np: ["स्याउ", "केरा", "गाजर", "सुन्तला"],
                    correct: 2,
                    type: "analytical",
                    explanation_en: "Carrot is a vegetable, others are fruits"
                },
                {
                    id: 41,
                    text_en: "If 1 dozen = 12, how many in 2.5 dozen?",
                    text_np: "यदि १ दर्जन = १२ भए, २.५ दर्जनमा कति हुन्छ?",
                    options_en: ["25", "30", "35", "40"],
                    options_np: ["२५", "३०", "३५", "४०"],
                    correct: 1,
                    type: "mathematical",
                    explanation_en: "2.5 × 12 = 30"
                },
                {
                    id: 42,
                    text_en: "Complete: Winter is to cold as summer is to _____",
                    text_np: "पूरा गर्नुहोस्: जाडो र चिसो जस्तै गर्मी र _____",
                    options_en: ["Hot", "Rain", "Snow", "Wind"],
                    options_np: ["तातो", "वर्षा", "हिउँ", "हावा"],
                    correct: 0,
                    type: "verbal",
                    explanation_en: "Winter is cold, summer is hot"
                },
                {
                    id: 43,
                    text_en: "What is 3² + 4²?",
                    text_np: "३² + ४² को मान के हो?",
                    options_en: ["7", "12", "25", "49"],
                    options_np: ["७", "१२", "२५", "४९"],
                    correct: 2,
                    type: "mathematical",
                    explanation_en: "9 + 16 = 25"
                },
                {
                    id: 44,
                    text_en: "If you face east and turn right 90°, which direction are you facing?",
                    text_np: "यदि तपाईं पूर्वतिर फर्कनुभयो र दायाँतिर ९०° फर्कनुभयो भने, कुन दिशातिर फर्कनुभएको छ?",
                    options_en: ["North", "South", "East", "West"],
                    options_np: ["उत्तर", "दक्षिण", "पूर्व", "पश्चिम"],
                    correct: 1,
                    type: "spatial",
                    explanation_en: "East → right 90° → South"
                },
                {
                    id: 45,
                    text_en: "What is the next number: 100, 81, 64, 49, ?",
                    text_np: "अर्को नम्बर के हो: १००, ८१, ६४, ४९, ?",
                    options_en: ["36", "35", "34", "33"],
                    options_np: ["३६", "३५", "३४", "३३"],
                    correct: 0,
                    type: "pattern",
                    explanation_en: "Square numbers: 10², 9², 8², 7², 6²=36"
                },
                {
                    id: 46,
                    text_en: "Which is NOT a multiple of 3?",
                    text_np: "कुन ३ को गुणज होइन?",
                    options_en: ["12", "15", "17", "21"],
                    options_np: ["१२", "१५", "१७", "२१"],
                    correct: 2,
                    type: "mathematical",
                    explanation_en: "17 is not divisible by 3"
                },
                {
                    id: 47,
                    text_en: "What is the perimeter of a rectangle with length 8cm and width 3cm?",
                    text_np: "लम्बाइ ८ से.मि. र चौडाइ ३ से.मि. भएको आयतको परिमिति के हो?",
                    options_en: ["11 cm", "22 cm", "24 cm", "30 cm"],
                    options_np: ["११ से.मि.", "२२ से.मि.", "२४ से.मि.", "३० से.मि."],
                    correct: 1,
                    type: "mathematical",
                    explanation_en: "Perimeter = 2×(8+3) = 2×11 = 22 cm"
                },
                {
                    id: 48,
                    text_en: "If A=1, B=2, C=3... Z=26, what is A+B+C?",
                    text_np: "यदि A=1, B=2, C=3... Z=26 भए, A+B+C को मान के हो?",
                    options_en: ["5", "6", "7", "8"],
                    options_np: ["५", "६", "७", "८"],
                    correct: 1,
                    type: "mathematical",
                    explanation_en: "1+2+3 = 6"
                },
                {
                    id: 49,
                    text_en: "What is 1/3 of 90?",
                    text_np: "९० को १/३ के हो?",
                    options_en: ["20", "30", "40", "50"],
                    options_np: ["२०", "३०", "४०", "५०"],
                    correct: 1,
                    type: "mathematical",
                    explanation_en: "90 ÷ 3 = 30"
                },
                {
                    id: 50,
                    text_en: "Complete the sequence: 2, 5, 10, 17, ?",
                    text_np: "क्रम पूरा गर्नुहोस्: २, ५, १०, १७, ?",
                    options_en: ["24", "26", "28", "30"],
                    options_np: ["२४", "२६", "२८", "३०"],
                    correct: 1,
                    type: "pattern",
                    explanation_en: "Difference increases by 2: +3, +5, +7, +9 = 26"
                }
            ]
        };

        // Current test state
        let currentTest = null;
        let currentQuestionIndex = 0;
        let userAnswers = {};
        let testType = "";
        let timerInterval = null;
        let timeRemaining = 0;
        let totalTime = 0;
        let startTime = null;
        let endTime = null;

        // DOM Elements
        const testSelection = document.getElementById('test-selection');
        const questionSection = document.getElementById('question-section');
        const resultsSection = document.getElementById('results-section');
        const questionContent = document.getElementById('question-content');
        const currentQuestionEl = document.getElementById('current-question');
        const totalQuestionsEl = document.getElementById('total-questions');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const restartBtn = document.getElementById('restart-btn');
        const reviewBtn = document.getElementById('review-btn');
        const timerContainer = document.getElementById('timer-container');
        const timerEl = document.getElementById('timer');
        const progressFill = document.getElementById('progress-fill');
        const currentTimerQuestion = document.getElementById('current-timer-question');
        const totalTimerQuestions = document.getElementById('total-timer-questions');
        const iqScoreEl = document.getElementById('iq-score');
        const currentTestTypeEl = document.getElementById('current-test-type');
        const currentTestTypeNpEl = document.getElementById('current-test-type-np');
        const correctAnswersEl = document.getElementById('correct-answers');
        const timeTakenEl = document.getElementById('time-taken');
        const accuracyRateEl = document.getElementById('accuracy-rate');
        const performanceScoreEl = document.getElementById('performance-score');
        const resultsScoreEl = document.getElementById('results-score');

        // Test selection
        document.getElementById('mcq-test').addEventListener('click', () => startTest('mcq'));
        document.getElementById('logical-test').addEventListener('click', () => startTest('logical'));
        document.getElementById('iq-test').addEventListener('click', () => startTest('iq'));

        // Start test function
        function startTest(type) {
            testType = type;
            currentTest = questions[type];
            currentQuestionIndex = 0;
            userAnswers = {};
            
            // Set test time based on type
            if (type === 'mcq') {
                totalTime = 15 * 60; // 15 minutes
            } else if (type === 'logical') {
                totalTime = 20 * 60; // 20 minutes
            } else {
                totalTime = 25 * 60; // 25 minutes
            }
            
            timeRemaining = totalTime;
            startTime = new Date();
            
            // Update UI
            testSelection.style.display = 'none';
            questionSection.classList.add('active');
            resultsSection.classList.remove('active');
            timerContainer.classList.add('active');
            
            // Show home button
            homeBtn.classList.remove('hidden');
            
            // Set test type text
            const testNames = {
                mcq: {en: "MCQ Intelligence Test", np: "बहुविकल्पीय बुद्धि परीक्षण"},
                logical: {en: "Logical Reasoning Test", np: "तार्किक तर्क परीक्षण"},
                iq: {en: "Comprehensive IQ Test", np: "व्यापक आईक्यू परीक्षण"}
            };
            
            currentTestTypeEl.textContent = testNames[type].en;
            currentTestTypeNpEl.textContent = testNames[type].np;
            
            // Set total questions
            totalQuestionsEl.textContent = currentTest.length;
            totalTimerQuestions.textContent = currentTest.length;
            
            // Start timer
            startTimer();
            
            // Load first question
            loadQuestion();
        }

        // Timer functions
        function startTimer() {
            clearInterval(timerInterval);
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    submitTest();
                }
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            timerEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Update progress bar
            const progressPercentage = ((totalTime - timeRemaining) / totalTime) * 100;
            progressFill.style.width = `${progressPercentage}%`;
            
            // Update timer color based on remaining time
            if (timeRemaining < totalTime * 0.2) {
                timerEl.className = 'timer danger';
            } else if (timeRemaining < totalTime * 0.5) {
                timerEl.className = 'timer warning';
            } else {
                timerEl.className = 'timer';
            }
        }
        
        function stopTimer() {
            clearInterval(timerInterval);
            endTime = new Date();
        }

        // Load question function
        function loadQuestion() {
            const question = currentTest[currentQuestionIndex];
            const isEnglish = !body.classList.contains('language-np');
            
            // Update question counter
            currentQuestionEl.textContent = currentQuestionIndex + 1;
            currentTimerQuestion.textContent = currentQuestionIndex + 1;
            
            // Build question HTML
            const questionText = isEnglish ? question.text_en : question.text_np;
            const options = isEnglish ? question.options_en : question.options_np;
            
            let questionHTML = `<div class="question-text">${question.id}. ${questionText}</div>`;
            
            // Add options
            questionHTML += `<div class="options-container">`;
            
            options.forEach((option, index) => {
                const isSelected = userAnswers[question.id] === index;
                questionHTML += `
                    <div class="option ${isSelected ? 'selected' : ''}" data-index="${index}">
                        <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                        <div class="option-text">${option}</div>
                    </div>
                `;
            });
            
            questionHTML += `</div>`;
            
            // Insert into DOM
            questionContent.innerHTML = questionHTML;
            
            // Add event listeners to options
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from all options
                    document.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Save user answer
                    userAnswers[question.id] = parseInt(this.getAttribute('data-index'));
                });
            });
            
            // Update navigation buttons
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.style.display = currentQuestionIndex === currentTest.length - 1 ? 'none' : 'flex';
            submitBtn.style.display = currentQuestionIndex === currentTest.length - 1 ? 'flex' : 'none';
        }

        // Navigation functions
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestionIndex < currentTest.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            }
        });

        // Submit test function
        submitBtn.addEventListener('click', submitTest);
        
        function submitTest() {
            stopTimer();
            
            // Calculate results
            let correctCount = 0;
            let questionTypes = {
                mathematical: {total: 0, correct: 0},
                logical: {total: 0, correct: 0},
                analytical: {total: 0, correct: 0},
                general: {total: 0, correct: 0},
                verbal: {total: 0, correct: 0},
                pattern: {total: 0, correct: 0},
                spatial: {total: 0, correct: 0}
            };
            
            currentTest.forEach(question => {
                // Count by type
                if (questionTypes[question.type]) {
                    questionTypes[question.type].total++;
                }
                
                if (userAnswers[question.id] === question.correct) {
                    correctCount++;
                    if (questionTypes[question.type]) {
                        questionTypes[question.type].correct++;
                    }
                }
            });
            
            // Calculate time taken
            const timeTaken = totalTime - timeRemaining;
            const timeTakenMinutes = Math.floor(timeTaken / 60);
            const timeTakenSeconds = timeTaken % 60;
            const timeTakenFormatted = `${timeTakenMinutes}:${timeTakenSeconds.toString().padStart(2, '0')}`;
            
            // Calculate accuracy
            const accuracy = (correctCount / currentTest.length) * 100;
            
            // Calculate performance score (based on accuracy and time)
            const timeEfficiency = Math.max(0, 100 - (timeTaken / totalTime) * 100);
            const performanceScore = Math.round((accuracy * 0.7) + (timeEfficiency * 0.3));
            
            // Calculate IQ score (simplified)
            const iqScore = 85 + Math.round((performanceScore / 100) * 45);
            
            // Determine IQ category
            let iqCategory, iqCategoryNp, recommendations, recommendationsNp;
            
            if (performanceScore >= 90) {
                iqCategory = "Excellent";
                iqCategoryNp = "उत्कृष्ट";
                recommendations = "You have excellent cognitive abilities. Keep challenging yourself!";
                recommendationsNp = "तपाईंसँग उत्कृष्ट संज्ञानात्मक क्षमताहरू छन्। आफूलाई चुनौती दिइरहनुहोस्!";
            } else if (performanceScore >= 75) {
                iqCategory = "Very Good";
                iqCategoryNp = "धेरै राम्रो";
                recommendations = "You have strong analytical skills. Practice regularly to improve further.";
                recommendationsNp = "तपाईंसँग बलियो विश्लेषणात्मक कौशलहरू छन्। अझ सुधार गर्न नियमित अभ्यास गर्नुहोस्।";
            } else if (performanceScore >= 60) {
                iqCategory = "Good";
                iqCategoryNp = "राम्रो";
                recommendations = "You have good cognitive abilities. Focus on speed and accuracy.";
                recommendationsNp = "तपाईंसँग राम्रो संज्ञानात्मक क्षमताहरू छन्। गति र शुद्धतामा केन्द्रित गर्नुहोस्।";
            } else if (performanceScore >= 40) {
                iqCategory = "Average";
                iqCategoryNp = "औसत";
                recommendations = "You have average abilities. Regular practice will help improve.";
                recommendationsNp = "तपाईंसँग औसत क्षमताहरू छन्। नियमित अभ्यासले सुधार गर्न मद्दत गर्नेछ।";
            } else {
                iqCategory = "Needs Improvement";
                iqCategoryNp = "सुधार आवश्यक";
                recommendations = "Practice more with different types of questions to improve.";
                recommendationsNp = "सुधार गर्न विभिन्न प्रकारका प्रश्नहरूसँग थप अभ्यास गर्नुहोस्।";
            }
            
            // Prepare question type breakdown
            const questionTypesText = [];
            const questionTypesTextNp = [];
            
            for (const type in questionTypes) {
                if (questionTypes[type].total > 0) {
                    const percentage = questionTypes[type].total > 0 
                        ? Math.round((questionTypes[type].correct / questionTypes[type].total) * 100) 
                        : 0;
                    
                    questionTypesText.push(`${type}: ${percentage}%`);
                    questionTypesTextNp.push(`${getNepaliTypeName(type)}: ${percentage}%`);
                }
            }
            
            // Calculate average time per question
            const avgTimePerQuestion = Math.round(timeTaken / currentTest.length);
            
            // Update results UI
            iqScoreEl.textContent = iqScore;
            document.getElementById('iq-category').textContent = iqCategory;
            document.getElementById('iq-category-np').textContent = iqCategoryNp;
            correctAnswersEl.textContent = `${correctCount}/${currentTest.length}`;
            timeTakenEl.textContent = timeTakenFormatted;
            accuracyRateEl.textContent = `${accuracy.toFixed(1)}%`;
            performanceScoreEl.textContent = performanceScore;
            resultsScoreEl.textContent = performanceScore;
            
            document.getElementById('question-types').textContent = questionTypesText.join(', ');
            document.getElementById('question-types-np').textContent = questionTypesTextNp.join(', ');
            
            document.getElementById('time-analysis').textContent = `Average time per question: ${avgTimePerQuestion} seconds`;
            document.getElementById('time-analysis-np').textContent = `प्रति प्रश्न औसत समय: ${avgTimePerQuestion} सेकेन्ड`;
            
            document.getElementById('recommendations').textContent = recommendations;
            document.getElementById('recommendations-np').textContent = recommendationsNp;
            
            // Show results
            questionSection.classList.remove('active');
            timerContainer.classList.remove('active');
            resultsSection.classList.add('active');
            
            // Keep home button visible
            homeBtn.classList.remove('hidden');
        }
        
        function getNepaliTypeName(type) {
            const typeMap = {
                'mathematical': 'गणितीय',
                'logical': 'तार्किक',
                'analytical': 'विश्लेषणात्मक',
                'general': 'सामान्य',
                'verbal': 'शाब्दिक',
                'pattern': 'ढाँचा',
                'spatial': 'स्थानिक'
            };
            return typeMap[type] || type;
        }

        // Restart test
        restartBtn.addEventListener('click', () => {
            resultsSection.classList.remove('active');
            testSelection.style.display = 'block';
            // Keep home button visible
            homeBtn.classList.remove('hidden');
        });
        
        // Review answers
        reviewBtn.addEventListener('click', () => {
            alert('This feature would show each question with correct answers highlighted. In a full implementation, you would see your answers versus correct answers.');
        });

        // Initialize the page
        function init() {
            // Set initial language
            body.classList.remove('language-np');
            enBtn.classList.add('active');
            npBtn.classList.remove('active');
            
            // Initially hide home button
            homeBtn.classList.add('hidden');
        }

        // Initialize the page when loaded
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>